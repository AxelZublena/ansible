- name: Add ArchStrike repo
  become: true
  shell: sudo echo -e "[archstrike]\nServer = https://mirror.archstrike.org/\$arch/\$repo" >> /etc/pacman.conf
  tags:
    - base

- name: Update Pacman cache
  become: true
  pacman:
    update_cache: yes
  tags:
    - base

# - name: Install ArchStrike keyring
#   become: true
#   shell: sudo pacman-key --init &&
#     dirmngr < /dev/null &&
#     sudo pacman-key -r 9D5F1C051D146843CDA4858BDE64825E7CBC0D51 &&
#     sudo pacman-key --lsign-key 9D5F1C051D146843CDA4858BDE64825E7CBC0D51 &&
#     sudo pacman -S archstrike-keyring archstrike-mirrorlist
#   tags:
#     - base

- name: Install ArchStrike keyring
  become: true
  community.general.pacman_key:
    id: 9D5F1C051D146843CDA4858BDE64825E7CBC0D51
    url: https://archstrike.org/keyfile.asc
    state: present

- name: Install ArchStrike Keyring Packages 
  become: true
  pacman:
    name: 
      - archstrike-keyring
      - archstrike-mirrorlist

- name: Install InfoSec Packages (Pacman)
  become: true
  pacman:
    name: 
      - aircrack-ng
      - binutils
      - binwalk
      - bison
      - carwhisperer
      - dnsmasq
      - ghidra
      - gnu-netcat
      - hashcat
      - hexedit
      - john
      - lynis
      - net-tools
      - nmap
      - perl-image-exiftool
      - pgpdump
      - redfang
      - sha3sum
      - sonic-visualiser
      - imagemagick
      - tcpdump
      - traceroute
      - ubertooth-git
      - wireshark-qt
  tags:
    - base

- name: Install InfoSec Packages (AUR)
  shell: yay -S --noconfirm aur/hash-identifier-git aur/hidattack aur/networkminer aur/redress aur/steghide
  tags:
    - base
